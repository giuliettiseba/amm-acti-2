:root{
  --glass-bg: rgba(255,255,255,0.03);
  --glass-bg-active: rgba(255,255,255,0.06);
  --glow-color: 58,123,213; /* bluish */
}

.nav-item{
  position: relative;
  overflow: visible;
  border-radius: 10px;
  padding: 6px 12px;
  transition: color .25s ease, background .35s ease, transform .35s ease;
  --x: 50%;
  --y: 50%;
}

/* glass layer */
.nav-item::before{
  content: '';
  position: absolute;
  inset: 0;
  border-radius: inherit;
  background: var(--glass-bg);
  /* reduced blur for better legibility */
  backdrop-filter: blur(2px) saturate(130%);
  -webkit-backdrop-filter: blur(2px) saturate(130%);
  pointer-events: none;
  transition: opacity .35s ease, transform .45s ease;
  /* slightly lower opacity so text reads better */
  opacity: 0.5;
}

/* subtle water/ripple overlay that animates */
.nav-item::after{
  content: '';
  position: absolute;
  left: 50%;
  top: 50%;
  width: 220%;
  height: 220%;
  transform: translate(-50%, -50%) scale(0.6);
  border-radius: 40%;
  /* toned-down highlights to avoid washing out text */
  background: radial-gradient(circle at var(--x) var(--y), rgba(255,255,255,0.10), rgba(255,255,255,0.04) 25%, rgba(255,255,255,0) 45%);
  pointer-events: none;
  opacity: 0;
  transition: opacity .45s ease, transform .55s cubic-bezier(.2,.9,.3,1);
  mix-blend-mode: overlay;
}

/* animated glow for active state */
@keyframes glowPulse {
  0% { box-shadow: 0 6px 18px rgba(var(--glow-color), 0.08), 0 0 0 rgba(var(--glow-color), 0.0); }
  50% { box-shadow: 0 10px 30px rgba(var(--glow-color), 0.14), 0 0 32px rgba(var(--glow-color), 0.12); }
  100% { box-shadow: 0 6px 18px rgba(var(--glow-color), 0.08), 0 0 0 rgba(var(--glow-color), 0.0); }
}

@keyframes waterShift {
  0% { transform: translate(-50%, -50%) scale(0.6) rotate(0deg); opacity: 0.0; }
  20% { transform: translate(-50%, -50%) scale(0.85) rotate(6deg); opacity: 0.9; }
  60% { transform: translate(-50%, -50%) scale(0.9) rotate(-4deg); opacity: 0.6; }
  100% { transform: translate(-50%, -50%) scale(0.8) rotate(0deg); opacity: 0.85; }
}

.nav-item:hover::after{
  opacity: 0.75;
  transform: translate(-50%, -50%) scale(0.85);
}

.nav-item:hover{
  transform: translateY(-2px);
}

/* Active/selected state */
.nav-item.active,
.nav-item:has(.active) {
  color: white !important;
  background: linear-gradient(135deg, rgba(58,123,213,0.95), rgba(29,78,216,0.92));
  border-radius: 10px;
  animation: glowPulse 2.6s ease-in-out infinite;
}

.nav-item.active::before,
.nav-item:has(.active)::before{
  background: var(--glass-bg-active);
  /* reduce overlay opacity so text stays readable */
  opacity: 0.12;
}

.nav-item.active::after,
.nav-item:has(.active)::after{
  animation: waterShift 1.2s ease-in-out both;
  /* much lower to avoid washing text */
  opacity: 0.18;
}

/* make sure text sits above pseudo elements */
.nav-item .MuiButton-label, .nav-item .MuiListItemText-root{
  position: relative;
  z-index: 4;
  /* subtle shadow to improve contrast over bright/dark gradients */
  text-shadow: 0 1px 2px rgba(0,0,0,0.6);
}

/* Drawer list items get a slightly different style to fit the narrow area */
.list-drawer .nav-item{
  border-radius: 6px;
  margin: 6px 8px;
}

/* Respect light/dark backgrounds: if button is contained or primary, reduce glass */
.nav-item.MuiButton-contained, .nav-item.MuiButton-containedPrimary{
  --glass-bg: rgba(255,255,255,0.04);
}

/* small screens: reduce effect intensity */
@media (max-width: 900px){
  .nav-item::after{ width: 180%; height: 180%; }
  .nav-item{ border-radius: 8px; }
}
